var modo=modo||{};modo.elements=modo.elements||{};modo.controls=modo.controls||{};modo.resources=modo.resources||{};modo.resource_editing=modo.resource_editing||{};var resources=resources||{},_ResourcesView,ResourcesView;modo=modo||{};
var ResourceEvents={SHOW_ALL:"edmodo_show_all",SHOW_ASSIGNMENTS:"edmodo_show_assignments",SHOW_FILES:"edmodo_show_files",SHOW_LINKS:"edmodo_show_links",SHOW_POLLS:"edmodo_show_polls",SHOW_ARCHIVED:"edmodo_show_archived",SHOW_ALL_AUTHORS:"edmodo_show_all_authors",SHOW_USERS:"edmodo_show_users",SHOW_FROM_CONNECTIONS:"edmodo_SHOW_FROM_CONNECTIONS",SHOW_FROM_DIRECT:"edmodo_SHOW_FROM_DIRECT",SHOW_MORE:"edmodo_show_more",SHOW_TAGS:"edmodo_show_tags",FILE_UPDATED:"FILE_UPDATED.EditResourceBox"},FolderEvents=
{DELETE_FOLDER:"DEL-FOLDER",FOLDERS_LOADED:"FolderPanel.FOLDERS_LOADED"},AuthorshipPanel,FolderProperties,folders,AbstFoldersPanel,GroupLbl,SelectableFolder,FoldersGroup,FolderPanel,FoldersPanel2;modo.resources=modo.resources||{};var editor_ids,DOCS_EDITABLE=DOCS_EDITABLE||0,ResourceInfo,ItemThumb;resources=(resources=resources||{})||{};var RBItem,ThumbsSelection,AddLinkDialog,ResourceInfoForm;resources=resources||{};var AddToLibraryDialog,groups;resources=(resources=resources||{})||{};
var LibraryGlobal={},RecycleBoxUI,RecycleBox,ResourcesPanel;
(function(f){f(function(){var S=modo,aa=S.elements,z=S.resources;z=modo.resources=modo.resources||{};var C=setUpInheritance,L=GlobalDispatcher,T=GlobalDispatcher_j,k=modo.EL,M=AbstElement,ga=resources.processItemData,ha=f.getJSON,q,i=translated_text,J=modo.elements.createElement,U=modo.elements.A,Sa=modo.config.gdocs.FEATURE_ENABLED,Ga=modo.config.gdocs.ENABLED,Ta=modo.classes.lib.gdAuthURI,va=JSON.stringify,Ha=SelectableItem,P=SelectList,la=countProperties,K=f.facebox,Ua=STUDENT,V=user_type,Ia=AbPanel,
E=Selectable,W=modo.elements.DIV,ba=SelectableFolder,ma=AbstFoldersPanel,O=FolderProperties,ca=DEPENDENCY_LOADED,wa=FolderEvents,na=FoldersGroup,Ja=LimitedSelectList,oa=Panel2,Ka=f("body");S=modo;aa=S.elements;z=S.resources;var da=S.killEventBubbling;J=aa.createElement;W=aa.DIV;U=aa.A;var Va=aa.H3,La=aa.SPAN;S=z.TinyResource;var Wa=f.post,Xa=user_id,Ma=CROCODOC_FLOOR,ea=LibraryGlobal,Na=AbstTemp;da=modo.killEventBubbling;var ia=resources.ItemBoxTmp,Q=ResourceInfo,xa=ImageUploader,ya=resources.ParentingGroup,
pa=ItemThumb,qa=GroupLbl;q=AuthorshipPanel;var za=FoldersPanel2,ra=groups,sa=folders,R,Z=FolderPanel,X=AddLinkDialog,Ya=ResourceEvents,ja=ThumbsSelection,ta=resources.FilteringUI,Aa=RBItem;R=resources.FilterController;var ka=RecycleBoxUI,ua=resources.ItemBox,Za=ListBox;ga=resources.processItemData=function(a){a.partner_embed_css="";a.id=a.id||a.library_item_id;a.url=a.url||"";a.name=a.name||"";a.thumb=a.thumb||a.thumb_url;a.thumb_url=a.thumb_url||a.thumb;switch(a.type){case "link":if(a.title)a.name=
a.title;a.href="/link?id="+a.link_id+"&url="+escape(a.url);if((a.a_lbl=a.url)&&a.url.length>45)a.a_lbl=a.url.substr(0,45)+"...";break;case "file":a.a_lbl="";if("png jpg jpeg gif".indexOf(a.file_type)!=-1){a.is_image=1;a.href=a.file_url}break;case "embed":a.a_lbl=""}return a};var Oa,Ba;z.ResourcesView=ResourcesView=_ResourcesView=function(a,b,c,g){function d(){F=0;r.jq.removeClass(Ca);w();b.list_j.empty();b.empty_j.hide();v.max_id=0}function e(){var t={size:G};if(N)t.next=N;return t}function h(t){N=
t.next;m(t.docs)}function l(t){N=t.next;o(t.docs)}function j(t){a.removeClass(Pa).addClass(Qa+t);Pa=Qa+t}function s(t){var D=t.length;if(D)if(v.author&&v.author===q.GDOC)delete v.gdocs;else{H=v.folder?t[D-1].id:t[D-1].rel_id;if(v.author==="ME")H=t[D-1].library_added_id}}function n(t){var D,$,Y;for(D in t){Y=t[D];Y=ga(Y);$=new c(Y);A[Ba(Y)]=$;if(g){Y=I.getUI($,Y);$.init(Y,r.selectable)}b.addExisting($)}if(t.length)!r.folder_obj&&t.length>=G-1?more_link_j.show():more_link_j.hide();else more_link_j.hide()}
function m(t){s(t);p();b.removeAll();n(t);r.disp.trigger(ResourcesView.RESOURCES_LOADED)}function o(t){s(t);p();n(t);r.disp.trigger(ResourcesView.RESOURCES_LOADED)}function w(){B.show();more_link_j.hide()}function p(){B.hide();r.folder_obj?more_link_j.hide():more_link_j.show()}q=AuthorshipPanel;var r=this,u=f(k.D).addClass("title"),y=f(k.D).addClass("header"),B=f(k.D).addClass("pin-wheel").hide(),I,x,A={},G=24,H=0,v={author:"",direct:0,group:0,max_id:0,type:0,max_id:0,size:G},F,N,fa,Ra;r.disp=f(r);
r.selectable=0;r.jq=a;r.header_j=y;r.title_j=u;r.list_box=b;if(g)I=g.getInstance();more_link_j=f(k.D).addClass("more-resources").append(f(k.A).append(i.more)).hide();var Ca="GDOCS";r.getGdocs=function(){d();r.setTitle(i.gdocs,Ca);F=1;ha("/library/ajax-get-google-docs",e(),h)};r.filterByGcollection=function(t){d();r.setTitle(i.gdocs,Ca);F=1;var D=e();D.next=t;ha("/library/ajax-get-google-docs",D,h)};x=r.getItems=function(){d();ha("/library/ajax-get-resources",v,m)};r.setTitle=function(t,D){u.text(t);
D&&j(D)};fa=r.setNoResourcesStr=function(t){b.setEmptyMsg(t)};r.search=function(t){v.key=t;x();fa(i["no-search-results"])};r.clearSearch=function(){delete v.key;x();fa(i["no-resources"])};r.filterByType=function(t){v.type=t;x();fa(i["no-resources"])};r.filterByGroup=function(t){v.group=t;x();fa(i["no-resources"])};Ra=r.filterByFolder=function(t,D,$){v.folder=t;v.group=0;v.author="";v.size=1E5;delete v.type;x();if(D.length>53)D=D.substring(0,50)+"...";u.text(D).show();if(t=="fav"){r.jq.addClass("favorites-viewed");
r.jq.removeClass("folder-viewed")}else{r.jq.addClass("folder-viewed");r.jq.removeClass("favorites-viewed")}j("FOLDER");fa(i.emp_folder);v.size=G;r.folder_obj=$};T.bind(L.DISPLAY_FOLDER,function(t,D){Ra(D.folder_id,D.name)});var Pa="",Qa="at-";r.filterByAuthor=function(t){t&&j(t);delete r.folder_obj;t?v.author=t:delete v.author;v.direct=0;delete v.turnins;delete v.folder;x()};r.getDirect=function(){v.author="";v.direct=1;x()};r.getTurnIns=function(){v.author="";v.turnins=1;x()};r.deselectItem=function(t){A[Ba(t)].deselect()};
r.setPageNum=function(t){G=t;v.size=t};r.showLoader=w;more_link_j.click(function(){w();if(F)ha("/library/ajax-get-google-docs",e(),l);else{v.max_id=H;ha("/library/ajax-get-resources",v,o)}});a.addClass("modo resources ResourcesView").append(y.append(u),thumb_wrapper_j=f(k.D).addClass("view").append(b.jq,B,more_link_j))};ResourcesView.RESOURCES_LOADED="RESOURCES_LOADED";Ba=ResourcesView.buildResKey=function(a){var b=a.type;return b+a[Oa[b]]};Oa=ResourcesView.id_key_map={embed:"embed_id",file:"file_id",
link:"link_id",gdoc:"gdoc_id"};q=AuthorshipPanel=function(a){var b=this,c=jQuery,g=function(n){b.disp.trigger(q.SELECTED,n)},d,e=b.posts_j=f(k.A).addClass("all").append(i.post_attachments).click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,q.EVERYTHING);g(q.EVERYTHING);b.removeSelection();e.addClass(a)}),h=b.added_j=f(k.A).addClass("me "+a).append(i.added_by_me).click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,q.ADDED);g(q.ADDED);b.removeSelection();h.addClass(a)}),l=b.me_j=f(k.A).addClass("me-posts").append(i.sent_by_me).click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,
q.ME_POSTS);g(q.ME_POSTS);b.removeSelection();l.addClass(a)}),j=b.direct_j=f(k.A).addClass("direct").append(i.direct).click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,q.DIRECT);g(q.DIRECT);b.removeSelection();j.addClass(a)}),s=b.turnin_j=f(k.A).addClass("turnin").append(i["turned-in"]).click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,q.TURNIN);g(q.TURNIN);b.removeSelection();s.addClass(a)});switch(user_type){case "STUDENT":h.html(i.backpack);break;case "PUBLISHER":e.html(i.collection);h.hide();j.hide()}M.apply(b,
[k.D]);b.jq.addClass("resources AuthorshipPanel").append(h.append('<div class="bot"></div>'),e.append('<div class="bot"></div>'),l.append('<div class="bot"></div>'),s.append('<div class="bot"></div>'),j.append('<div class="bot"></div>'));if(Sa&&(Ga||Ta))b.jq.append(b.gdocs_j=d=c(J(U)).addClass("gdoc").html(i.gdocs+'<div class="bot"></div>').click(function(){L.sendEvent(q.FILTER_BY_AUTHOR,q.GDOC);g(q.GDOC);b.removeSelection();d.addClass(a)}));b.selectType=function(n){switch(n){case q.EVERYTHING:e.click();
break;case q.ADDED:h.click();break;case q.DIRECT:j.click();break;case q.TURNIN:s.click();break;case q.GDOC:d&&d.click()}};b.removeSelection=function(){b.disp.trigger(q.DESELECTED);b.jq.children().each(function(){f(this).removeClass(a)})};b.deselectAll=function(){b.removeSelection()}};C(q,M);q.FILTER_BY_AUTHOR="FILTER_BY_AUTHOR";q.EVERYTHING="EVERYTHING";q.ADDED="ADDED";q.ME="ME";q.ME_POSTS="ME-POSTS";q.DIRECT="DIRECT";q.STUDENTS="STUDENTS";q.TEACHERS="TEACHERS";q.TURNIN="TURNIN";q.GDOC="GDOC";q.SELECTED=
"SELECTED";q.DESELECTED="DESELECTED";O=FolderProperties=function(a,b,c,g){function d(){if(!la(c)){s=[];return"[]"}var I,x=[],A=B.getSelectedData();for(I in A)x.push(A[I].gID);return va(s=x)}function e(I,x,A){if(!n.hasChanged(1))return 0;w.hide();p.hide();if(V=="PUBLISHER"&&A.name.toLowerCase()==a.favorites.toLowerCase()){p.show();return 0}for(var G in g)if(g[G].name==A.name&&g[G].folder_id!=A.folder_id){w.show();return 0}j=A;f.ajax({url:I,success:x,data:A,dataType:"json",type:"POST"});m.hide();o.fadeIn()}
var h=this,l,j,s,n=new TextField(f(k.TXT),a["folder-name"]),m=f(k.BTN),o=f(k.D).addClass("loader").hide(),w=h.newDiv("err",[a["duplicate-names"]]).hide(),p=h.newDiv("err",[a.dup_fav_folder_err]).hide(),r=f();if(b){l=b.data;r=l.groups.join(",");for(var u in c)c[u].selected=r.indexOf(c[u].gID)!=-1?1:0;r=f(k.LBL).append(a["folder-name"]);n.jq.val(l.name);n.changed=1;m.val(a.save).click(function(){e("/library/ajax-update-folder",h.onFolderUpdated,{folder_id:l.folder_id,name:n.field_jq.val(),groups:d()})})}else m.val(a.create).click(function(){e("/library/ajax-create-folder",
h.onFolderCreated,{name:n.field_jq.val(),groups:d()})});if(la(c)){var y=h.newEl(k.LBL,"groups",[a["share-with-groups"]]);for(u in c)c[u].label=c[u].title;var B=new P(c,Ha);B.allow_multiple=true;B.jq.height(110)}else{u=f();B={jq:u};y=u}M.apply(h,[k.D]);h.init=function(){c.length&&B.init()};h.onFolderCreated=function(I){j.folder_id=parseInt(I);j.label=j.name;j.groups=s;L.sendEvent(O.CREATED,j);K.close()};h.onFolderUpdated=function(){j.label=j.name;j.groups=s;L.sendEvent(O.EDITTED,{name:j.name,groups:s,
folder:b});K.close()};h.jq.addClass("resources FolderProperties").append(r,n.jq,w,p,y,B.jq.addClass("groups"),f(k.D).addClass("center").append(o,m));if(V==Ua){B.jq.remove();y.remove()}n.setErrorMsg(a["enter-folder-name"])};C(O,M);O.EDIT="e";O.CREATED="FolderProperties.CREATED";O.EDITTED="FolderProperties.EDITTED";ma=AbstFoldersPanel=function(a,b,c,g){function d(e){g(e);folders=e}Ia.apply(this,[a,b,10,0,0]);this.jq.addClass("resources AbstFoldersPanel");if(c){g(c);this._onContentChanged(this)}else f.post("/library/ajax-get-folders",
{},d,"json")};C(ma,Ia);qa=GroupLbl=function(a){var b=this,c,g,d=Boolean(a.hex);E.apply(b,[k.D,a]);c=b.jq;f(b).bind(E.SELECTED,function(){d&&b.selected_bgc&&c.css("background-color",a.hex)});f(b).bind(E.DESELECTED,function(){c.css("background-color","")});b.jq.addClass("resources GroupLbl").append(g=f(k.D).addClass("color").css("background",a.hex),f(k.D).addClass("lbl").append(a.title));a["class"]&&b.jq.addClass(a["class"]);d||g.remove()};C(qa,E);qa.prototype.selected_bgc=1;ba=SelectableFolder=function(a,
b){var c=this,g,d=a.items_state;E.apply(c,[k.D,a]);c._bj=f(J(W)).addClass("bot");c._nw=f(J(W)).addClass("name");g=c.jq.addClass("resources SelectableFolder s"+d).append(c._nw,c._bj);b.deselectable?g.mouseup(function(){g.removeClass("s2");a.changed=1}):g.unbind("mouseup").mouseup(function(){c.select()});c.setName(a.name);a.css&&g.addClass(a.css);b&&b.tick&&g.prepend(f(J(W)).addClass("tick"));switch(d){case 2:c.select();break;default:c.deselect()}};C(SelectableFolder,E);ba.prototype.setName=function(a){this._nw.text(a)};
na=FoldersGroup=function(a,b){var c=this,g;for(g in b)b[g].label=b[g].name;var d=c.newDiv("header",[a.title]).css("color",a.hex).click(function(){if(c.folders_list.jq.is(":visible")){c.folders_list.jq.hide();d.removeClass("open")}else{c.folders_list.jq.show();d.addClass("open")}});c.folders_list=new P(b,ba,{});M.apply(c,[k.D]);c.jq.addClass("resources FoldersGroup").append(d,c.folders_list.jq.hide())};C(na,M);na.prototype.deselect=function(){this.folders_list.deselectAll()};Z=FolderPanel=function(a,
b,c,g){function d(n){h.jq.trigger(Z.DELETE_FOLDER,n.data.folder_id);h.removeItem(n.jq);delete h.folders[n.data.folder_id]}function e(n){var m=new ba(n,{translated_text:a,groups:c,folders_obj:b,del_handler:d,editable:g});f(m).bind(E.SELECTED,function(o){o=o.target;var w,p;for(w in h.folders){p=h.folders[w];p!=o&&p.deselect()}f(h).trigger(E.SELECTED,o)});h.folders[n.folder_id]=m;h.appendContent([m.jq])}var h=this;ma.apply(h,[a.folders,a,b,function(n){var m,o={};for(m in n){n[m].label=n[m].name;o[n[m].folder_id]=
n[m]}h.folders={};h.content_j.empty();if(la(o))for(var w in o)w&&e(o[w]);else h.setContent([l]);L.sendEvent(Z.FOLDERS_LOADED,{obj:o,arr:n})}]);h.jq.addClass("resources FolderPanel");var l=f(k.SP).append(a["no-folders"]).addClass("no-folders");if(g){var j;h.addFolder=function(){for(var n in c)c[n].selected=0;j=new O(a,0,c,b);K(j.jq);K.setTitle(a["create-folder"]);j.init();return j};var s=f(k.A).addClass("add-folder-btn").click(function(){h.addFolder();return false});T.bind(O.CREATED,function(n,m){e(m)});
T.bind(O.EDITTED,function(n,m){m.folder.label.html(m.name);m.folder.data.groups=m.groups});h.header_j.append(s)}};C(Z,ma);z=Z.prototype;Z.DELETE_FOLDER="DEL-FOLDER";Z.FOLDERS_LOADED="FolderPanel.FOLDERS_LOADED";z.deselectAll=function(){for(var a in this.folders)this.folders[a].deselect()};za=FoldersPanel2=function(a,b,c){function g(u){d(u);folders=u}function d(u){l=u.users;j=u.shared;m.load(l,ba,w);f(m).bind(P.SELECTION,function(I,x){o.deselectAll();Ka.removeClass(h);e.disp.trigger(E.SELECTED,x)});
e.group_folders=[];for(var y in j)if(b[y]){var B=new na(b[y],j[y],w);f(B.folders_list).bind(P.SELECTION,function(I,x){var A,G,H;for(A in e.group_folders){H=e.group_folders[A];H=H.folders_list.items;for(G in H)H[G]!=x&&H[G].deselect()}m.deselectAll();e.disp.trigger(E.SELECTED,x);Ka.addClass(h)});e.group_folders.push(B);o.addExisting(B)}if(!la(j)){s.remove();n.remove();o.jq.remove()}u.length&&L.sendEvent(wa.FOLDERS_LOADED,u)}var e=this,h="shared-folders",l,j,s=e.newDiv("tab users active",[i.my_folders]).click(function(){s.addClass("active");
n.removeClass("active");m.jq.show();o.jq.hide()}),n=e.newDiv("tab shared",[i.shared_w_me]).click(function(){n.addClass("active");s.removeClass("active");o.jq.show();m.jq.hide()}),m=new Ja,o=new Ja;e.users_list=m;m.setShowAll(1);o.setShowAll(1);m.more_link_j.remove();m.less_link_j.remove();o.more_link_j.remove();o.less_link_j.remove();oa.apply(e,[i.folders,[s,n,m.jq,o.jq.hide()]]);e.header_j.unbind("click");e.jq.addClass("resources FolderPanel FoldersPanel2");e.deselectAll=function(){m.deselectAll();
o.deselectAll()};e.removeFolder=function(u){e.jq.trigger(wa.DELETE_FOLDER,u.data.folder_id);m.removeItemAt(u.list_index);delete l[u.data.folder_id]};var w={translated_text:i,groups:b,folders_obj:l,editable:c},p=i["no-folders"];m.setEmptyMsg(p);o.setEmptyMsg(p);m.scale_items=0;o.scale_items=0;a?d(a):f.post("/library/ajax-get-folders",{},g,"json");if(c){var r;e.addFolder=function(){for(var u in b)b[u].selected=0;r=new O(i,0,b,l);K(r.jq);K.setTitle(i["create-folder"]);r.init();return r};a=f(k.A).addClass("add-folder-btn").click(function(){e.addFolder();
return false}).html(i["new"]);T.bind(O.CREATED,function(u,y){m.addItem(y,ba,w)}).bind(O.EDITTED,function(u,y){y.folder.label.html(y.name);y.folder.data.name=y.name;y.folder.data.groups=y.groups});e.header_j.append(a)}};C(za,oa);S=modo.resources.TinyResource=function(a,b){M.apply(this,[k.D]);if(a.length>50)a=a.substring(0,50)+"...";b.desc=b.desc;this.data=b;this.setData(b);this.jq.addClass(b.file_type+" post_box TinyResource "+b.type).append(this.remove_j=this.newA("remove",["x"]),this.newEl(k.SP,
"lbl",[a]))};C(S,M);Q=ResourceInfo=function(a,b,c){var g=this,d;M.apply(g,[k.D]);d=g.jq.mousedown(da);var e=g.header_j=f(J(Va));g.view_link_j=f(J(U)).addClass("view").text(b.view);var h=g.provider_j=f(J(W)).addClass("provider");g.edit_resource_j=f(J(U)).addClass("edit-res").click(function(){edit_resource_box=new EditResourceBox(g.data);K(edit_resource_box.jq);K.setTitle(g.data.name)}).text(b.edit);g.download_link_j=f(J(U)).addClass("download").text(b.download);g.set_as_featured_j=f(J(U)).addClass("set-featured").text(b.set_featured).click(function(){modo.featured_id=
g.data.id;L.sendEvent(Q.SET_AS_FEATURED,g);f.post("/library/ajax-set-featured",{user_id:Xa,item_id:g.data.id})});g.featured_lbl_j=f(J(W)).addClass("featured").text(b.featured);g.remove_link_j=f(J(U)).addClass("remove").append(f(J(La)).addClass("folder").text(b["remove-from-folder"]),f(J(La)).addClass("fav").text(b.remove_from_favorites)).click(function(){L.sendEvent(Q.REMOVED_FROM_FOLDER,g);g.disp.trigger(Q.REMOVED_FROM_FOLDER,g)}).hide();g.jq.addClass("ResourceInfo").append(e,h);var l=g.setFeatured=
function(){modo.featured_id&&parseInt(g.data.id)==parseInt(modo.featured_id)?d.addClass("is-featured"):d.removeClass("is-featured")};T.bind(Q.SET_AS_FEATURED,function(j,s){l(s.data.id)});a&&g.setData(a,c)};C(Q,M);z=Q.prototype;z._blank="_blank";z.setData=function(a,b){function c(){Wa("/message/ajax-log-file-preview",{file_id:a.file_id})}function g(){e.addClass(B)}var d=this,e=d.jq;d.data=a;var h=a.name,l=b.add_box,j=d.view_link_j,s=d.provider_j,n=d.edit_resource_j,m=d.download_link_j,o=d.set_as_featured_j,
w=d.featured_lbl_j;if(h&&h.length>60)h=h.substring(0,60)+"...";s.text(a.author_name);d.mainAction=function(){};var p=DOC_THUMBS_PATH,r=DOC_THUMBS_PATH+"modoviewer12.swf",u=a.name;if(u&&u.length>70)u=a.name.substring(0,69)+"...";if(d._prev_set){e.children().each(function(){e[0].removeChild(this)});j.unbind().removeAttr("href").removeAttr("target").removeAttr("title").removeClass("launch")}d._prev_set=1;d.setFeatured(d.data.id);e.append(s);switch(a.type){case "file":if(a.is_image){e.append(j.attr({href:a.file_url,
title:h}).facebox().click(function(){K.setTitle(u);c()}).html(i.preview));d.mainAction=function(){j.click()}}else if(a.conversion=="done"&&a.file_id<Ma)e.append(j.click(d.mainAction=function(){var v="";if(a.file_type=="ppt"||a.file_type=="pptx")v="&viewer=1";K(d.newDiv(0,['<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="505" height="438" id="myMovieName"><param name="wmode" value="transparent"></param><param name="movie" value="'+
r+'"/><param name="quality" value="high"/><param name="bgcolor" value="#FFFFFF"/><param name="flashvars" value="doc_url='+p+a.file_id+".swf"+v+'"/><param name="allowScriptAccess" value="always"/><param name="allowFullScreen" value="true"/><embed wmode="transparent" flashvars="doc_url='+p+a.file_id+".swf"+v+'" src="'+r+'" allowScriptAccess="always" allowFullScreen="true" quality="high" bgcolor="#FFFFFF" width="505" height="438" name="myMovieName" align="" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>']).css({width:"505px",
height:"438px"}));K.setTitle(u);c()}).html(i.view));else if(a.croc_uuid&&a.file_id>Ma)e.append(j.click(d.mainAction=function(){globalShowCrocoDocViewer(0,a.file_id,a.file_url,a.croc_uuid,0);c()}).html(i.view));else d.mainAction=function(){window.open(a.file_url,d._blank);c()};switch(a.file_type){case "swf":e.append(j.addClass("view").html(i.view).click(d.mainAction=function(){d.viewSwf(a.file_url,a.name);c()}));break;case "mp3":e.append(j.addClass("hear").click(d.mainAction=function(){d.playMp3(a.file_url,
a.name);c()}).html(i.play))}e.append(m.addClass(a.file_type).attr({href:a.file_url,target:d._blank}));break;case "link":h=a.url.match(/^[^v]+v.(.{11}).*/);if(a.url.indexOf("youtube")!=-1&&h){a.utube=1;h=h[1];var y="http://www.youtube.com/v/"+h+"?fs=1";e.append(j.addClass("view").click(function(){d.viewUTube(y,a.name)}).html(i.view));d.mainAction=function(){d.viewUTube(y,a.name)}}else{a.wrapped_url="/link?id="+a.link_id+"&url="+escape(a.url);e.append(j.addClass("launch").html(i["launch-website"]).attr({href:a.wrapped_url,
target:d._blank}));d.mainAction=function(){window.open(a.wrapped_url,d._blank)}}break;case "embed":e.append(j.click(d.mainAction=function(){var v=a.embed.replace(/\\"/g,'"');modo.resources.showEmbed(a.embed_id,0,v,true,a.name)}).html(i.view))}e.append(n,o,w);var B="added",I,x,A,G,H;if(V!="STUDENT"){b.profile||e.append(d.remove_link_j);if(l){e.prepend(A=d.newA("add",[i.library]).unbind().click(function(){f.getJSON("/library/ajax-add-to-library",{item_id:a.id},g);if(H){G++;x.html(G)}else{G=1;x.html(G);
I.show()}A.unbind("click").html(i.added)}),I=f(k.SP).addClass("score").append(x=f(k.SP)));if(a.library_added_id){e.addClass(B);A.unbind("click").html(i.added)}l=a.library_score;x.html(l);if(l==null||!(G=parseInt(l)))I.hide();else H=1}}};z.getPlugHtml=function(a,b,c,g){var d,e="";for(d in g){e+='<param name="'+d+'" value="'+_params[d]+'"></param>';_embedparams+=d+'="'+g[d]+'" '}return'<object width="'+a+'" height="'+b+'"><param name="movie" value="'+c+'"></param><param name="allowscriptaccess" value="always"></param>'+
e+'<embed src="'+c+'" type="application/x-shockwave-flash"  allowfullscreen="true" width="'+a+'" height="'+b+'"></embed></object>'};z.viewSwf=function(a,b){K(this.getPlugHtml(640,385,a));K.setTitle(b)};z.viewUTube=function(a,b){K(this.getPlugHtml(640,385,a));K.setTitle(b)};z.playMp3=function(a,b){K(this.getPlugHtml(500,24,"/bin/mediaplayer.swf",{flashvars:"type=sound&amp;file="+escape(a),name:"audiofile",allowScriptAccess:"never"}));K.setTitle(b)};z.setFolderView=function(a,b){b=this;LibraryGlobal.folder_view&&
!LibraryGlobal.shared_folder?b.remove_link_j.show():b.remove_link_j.hide();b.folder_view=LibraryGlobal.folder_view};Q.REMOVED_FROM_FOLDER="REMOVED_FROM_FOLDER.ResourceInfo";Q.ADD_TO_LIBRARY="ADD_TO_LIBRARY.ResourceInfo";Q.SET_AS_FEATURED="SET_AS_FEATURED.ResourceInfo";pa=ItemThumb=function(a,b){var c=this,g=b.InfoClass;c.folder_view=0;ga(a);var d=f(k.D).addClass("thumb "+a.type+" "+a.file_type+a.partner_embed_css).dblclick(function(){c.onDblClick(c)}).click(function(){c.toggleSelection()});a.thumb_url&&
d.css("background-image","url("+a.thumb_url+")");var e=a.name;if(e&&e.length>36)e=e.substring(0,33)+"...";e=f(k.A).append(e).addClass(a.type+" "+a.file_type).dblclick(function(){c.onDblClick(c)}).click(function(){c.toggleSelection()});E.apply(c,[k.D,a]);c.trans_text=b.trans_text;if(g){c.info=new g(a,c.trans_text,b);c.info.disp.bind(g.REMOVED_FROM_FOLDER,function(){c.jq.hide()})}c.jq.addClass("resources ItemThumb").append(d,e).unbind("mouseup").mouseenter(function(h){c.onMouseEnter(c,h)}).mouseleave(function(){c.onMouseLeave(c)});
c.data=a;c.setData(a)};C(pa,E);z=pa.prototype;z.onDblClick=function(a){a.info&&a.info.mainAction()};z.onMouseEnter=function(a){if(a.info){if(!a.point_box){a.point_box=new PointBox(a.jq,a.info.jq);a.point_box.jq.hide()}a.info.setFolderView(a.folder_view);a.show_interval=setInterval(function(){a.onShowInterval()},500)}};z.onShowInterval=function(a){a=this;if(a.point_box){a.point_box.jq.show();a.point_box.updatePosition();clearInterval(a.show_interval)}};z.onMouseLeave=function(a){if(a.info){a.point_box&&
a.point_box.jq.hide();a.show_interval&&clearInterval(a.show_interval)}};var Da;ia=resources.ItemBoxTmp=function(){var a=this,b,c,g;Na.apply(a,["resource_item_",'<div class="resources ItemBox"><input class="data" value="" type="hidden" style="display:none"><div class="thumb"><a target="_blank"></a><img src="" /></div><div id="resource_info" class="resource-info"><div class="title"></div><a class="title" target="_blank" href=""></a><a class="url" target="_blank" href=""></a><div class="desc"></div></div></div>']);
b=a.tmp_j.find(".thumb");a.thumb_a_j=c=b.children("a");a.thumb_img_j=g=b.children("img");a.title_j=a.tmp_j.find("a.title");a.title_d_j=a.tmp_j.find("div.title");a.url_j=a.tmp_j.find(".url");a.desc_j=a.tmp_j.find(".desc");a.jq.addClass("ItemBoxTmp");a.getUI=function(d,e){function h(n){da(n);ea.sortable&&ea.sortable.mouseup()}var l,j,s=(e.file_type||"").replace(".","");l={href:e.href,target:"_blank"};a.tmp_j.addClass(e.type+" "+s+" "+e.partner_embed_css);c.attr(l);a.title_j.attr(l).html(e.name);a.title_d_j.html(e.name);
a.url_j.attr(l).html(e.a_lbl);Boolean(e.description)?a.desc_j.html(e.description).addClass("display"):a.desc_j.removeClass("display");l={href:"javascript:",target:""};g.attr("src",e.thumb);j=d.info_box.mainAction;l=function(n){if(ea.list_view&&!ea.dragging){j();ea.sortable&&ea.sortable.mouseup();da(n)}};c.dblclick(j);switch(e.type){case "embed":c.removeAttr("href").mouseup(l);a.title_j.removeAttr("href").mouseup(l);break;case "link":if(e.utube){c.removeAttr("href").mouseup(l);a.title_j.removeAttr("href").mouseup(l);
a.url_j.removeAttr("href").mouseup(l)}else{c.mouseup(h);a.title_j.mouseup(h);a.url_j.mouseup(h)}break;case "file":c.removeAttr("href").mouseup(l);a.title_j.attr({href:e.file_url,target:"_blank"});a.url_j.removeAttr("href").mouseup(l)}l=a.buildClone(e.id);a.addRefs(l);c.unbind().removeAttr("href");b.css("background-image","");a.title_j.unbind().removeAttr("href").removeAttr("target");a.desc_j.empty();a.url_j.unbind().removeAttr("href");a.tmp_j.removeClass(e.type+" "+s+" "+e.partner_embed_css);return l};
a.addRefs=function(d){var e=d.info_box_j=d.children("#resource_info");d.title_j=e.children(".title")}};C(ia,Na);ia.getInstance=function(){if(Da)return Da;return Da=new ia};var Ea=function(a){LibraryGlobal.dragging||da(a);if(LibraryGlobal.prev_dragging){LibraryGlobal.prev_dragging=0;a.preventDefault()}};ua=resources.ItemBox=function(a){E.apply(this,[k.D,a]);(this.info_box=new Q(a,i,{profile:1,add_box:1})).jq.click(Ea).mouseup(Ea)};C(ua,E);ua.prototype.init=function(a,b){var c=this,g=c.data,d=c.info_box;
c.jq=a.addClass("resources ItemBox").click(Ea);c.setData(g);a.info_box_j.append(d.jq);d.header_j.remove();switch(g.type){case "link":d.view_link_j.remove()}b&&a.mouseup(function(){LibraryGlobal.dragging||c.toggleSelection();LibraryGlobal.dragging=0})};Aa=RBItem=function(a){var b=(a.file_type||"").replace(".","");ga(a);E.apply(this,[k.D,a]);var c=this.newDiv(),g=this.newDiv("thumb",[c]),d=this.newDiv("lbl",[a.name]),e=this.newDiv("author",[a.author_name]);d=this.newDiv("info",[d,e]);a.thumb_url?c.css("background-image",
"url("+a.thumb_url+")"):c.css("background-image","");this.jq.addClass(a.type+" "+b+a.partner_embed_css);switch(a.type){case "file":this.jq.addClass(a.file_type)}this.jq.addClass("resources RBItem").append(g,d)};C(Aa,E);ja=ThumbsSelection=function(a,b,c){var g=this;P.apply(g,[a,b,c]);g.allow_multiple=1;g.jq.addClass("resources ThumbsSelection");g.disp.bind(ja.SET_FOLDER_VIEW,function(d,e){g.setFolderView(e)})};C(ja,P);z=ja.prototype;ja.SET_FOLDER_VIEW="SET_FOLDER_VIEW";z.setMaxVertical=function(){};
z.setFolderView=function(a){for(var b in this.items)this.items[b].folder_view=a};z.onSelection=function(a){f(this).trigger(P.SELECTION,a.target)};X=AddLinkDialog=function(a){function b(s){j.changed=true;j.jq.val(s.title).attr("readOnly",false).focus();g.disp.trigger(X.RECEIVED_TITLE)}function c(){d.reset();L.sendEvent(X.ADDED)}var g=this,d=g,e="embed",h=new TextField(f(k.TXT),i["url-or-embed-instruction"]);h.jq.blur(function(){if(h.changed&&!j.changed&&h.jq.val().search(/</)==-1){e="link";j.jq.attr("readOnly",
true);g.disp.trigger(X.REQUESTED_TITLE);f.ajax({url:"/sharebox/ajax-get-url-title",success:b,type:"POST",data:{link:h.jq.val()},dataType:"json"});j.changed=1;j.jq.val(i["please-wait"])}});var l=g.newDiv("err",[i["script-tags-err"]]).hide(),j=new TextField(f(k.TXT),i.title_of_page);M.apply(g,[k.D]);g.url_tf=h;g.title_tf=j;g.jq.addClass("AddLinkDialog").append(h.jq,l,j.jq);h.setErrorMsg(i["http-or-embed-required"]);j.setErrorMsg(i["description-required"]);g.getEntry=function(){var s=1,n=h.jq.val();
if(h.hasChanged(1))j.hasChanged(1)||(s=0);else s=0;if(n.match(SCRIPT_TAGS_REGEX)){l.show();s=0}if(!s)return 0;return{url:jQuery.trim(n),desc:j.jq.val(),type:e}};g.submit=function(s){var n=g.getEntry();if(!n)return 0;delete n.type;n.data=va(s);f.ajax({url:a,success:c,type:"POST",data:n,dataType:"json"});return 1};d.reset=function(){j.resetDefaultStr();h.resetDefaultStr()}};C(X,M);X.ADDED="AddLinkDialog.ADDED";X.REQUESTED_TITLE="AddLinkDialog.REQUESTED_TITLE";X.RECEIVED_TITLE="AddLinkDialog.RECEIVED_TITLE";
L.sendEvent(ca,"AddLinkDialog");z=ResourceInfoForm=function(a){function b(){l.getChanged()?h.html(d+l.jq.val().length+e):h.html(d+0+e)}function c(){n.jq.hide();o.hide();m.addClass(p)}var g,d="( ",e=" / 200 )",h=f(k.D).addClass("chars"),l=new TextField(f(k.TXTA),""),j=f(k.A).append(i.remove).click(function(){w.hide();o.show();n.jq.show();s.reset();m.removeClass(p)}),s=new xa("/library/ajax-send-thumb",0,j),n=new TextField(f(k.TXT),i.url_of_thumbnail+"..."),m,o,w,p="loaded";l.jq.keyup(function(){g=
l.jq.val();b();g.length>199&&l.jq.val(g.substring(0,200))});this.init=function(){l.jq.elastic();b()};s.disp.bind(xa.UPLOADING,c);T.bind(xa.IMAGE_UPLOADED,function(r,u){s.setThumb(u);w.show()});M.apply(this,[k.D]);this.getEntry=function(){var r,u=n.getChanged()?n.jq.val():0;if(r=s.getUrl())u=r;return{thumb:u,desc:l.jq.val()}};this.jq.addClass("ResourceInfoForm").append(f(k.D).addClass("desc-lbl").append(i.desc_lbl),h,l.jq,f(k.D).addClass("thumb-lbl").append(i.thumbnail+":&nbsp;"),m=f(k.D).addClass("options").append(o=
f(k.SP).addClass("url-lbl").append(i.url_or),s.jq),w=f(k.D).addClass("remove-wrap").append(j,"&nbsp;",i.current_thumbnail).hide(),n.jq);if(a){j=a.thumb||a.thumb_url;a=a.description;if(j){s.setThumb(j);c();w.show()}a&&l.setValue(a)}};C(z,M);ya=resources.ParentingGroup=function(a){E.apply(this,[k.D,a]);a.css&&this.jq.addClass(a.css);this.jq.addClass("resources ParentingGroup").css("color",a.hex).append(this.newDiv("main",[a.title]))};C(ya,E);var Fa=AddToLibraryDialog=function(a,b,c){function g(){if(!c.length)return"[]";
var w,p=[],r=h.getSelectedData();for(w in r)p.push(r[w].gID);return va(p)}function d(){e.disp.trigger(Fa.ADDED);K.close()}var e=this,h,l=new pa(b,{trans_text:a});l.setEnabled(0);var j=f(k.BTN),s=f(k.D).addClass("loader").hide();M.apply(e,[k.D]);j.val(a["add-to-library"]).click(function(){f.ajax({url:"/library/ajax-add-to-library",success:d,data:{id:b.id,groups:g()},dataType:"json",type:"POST"});j.hide();s.show()});if(c.length){var n,m,o={};for(n in c){m=c[n];m.gID=m.gID||m.group_id;if(!m.main_group_id){m.sub_groups=
[];o[m.gID]=m}}for(n in c){m=c[n];m.main_group_id&&o[m.main_group_id].sub_groups.push(m)}h=new SelectList(o,ya,0,1);h.allow_multiple=1;h.jq.addClass("check-list");a=e.newDiv("groups-box",[e.newEl(k.LBL,0,[a["post-to-groups"]]),h.jq])}else{a=f();e.jq.addClass("no-group")}e.jq.addClass("resources AddToLibraryDialog").append(e.newDiv("col-1",[e.newDiv("center",[l.jq]),e.newDiv("btn center",[s,j])]),a);e.init=function(){c.length&&h.init()}};C(Fa,M);Fa.ADDED="AddToLibraryDialog.ADDED";ta=resources.FilteringUI=
function(a,b,c){function g(){H.jq.hide()}function d(){f(document).trigger(R.SEARCH_RESOURCES,p.search_tf_j.val());y.show()}function e(){B.empty().append(f(k.SP).append(i.loading+"..."))}function h(F){F=F.users;p.folders_obj={};for(var N in F){F[N].label=F[N].name;p.folders_obj[F[N].folder_id]=F[N]}}function l(){a.removeClass(I);p.authorship_panel.deselectAll();b.list_box.deselectAll();G.jq.hide();H.jq.hide()}f("body").addClass("ut-"+V.substring(0,4));var j={},s=[],n;if(ra&&ra.length)for(var m in ra){var o=
ra[m],w=!parseInt(o.archived);if(!o.gID)o.gID=o.group_id;o.group_id=o.gID;o.label=o.title;if(w){s.push(o);j[o.gID]=o}}else n=1;var p=this,r,u=b.list_box;p.jq=a;p.res_list=u;p.disp=f({});p.gDocsBool=0;p.init=function(){p.type_dd.init();H.init()};p.confirmAction=function(F){B.empty().append(f(k.SP).append(F)).show();r=setInterval(function(){clearInterval(r);B.fadeOut(300,e)},5E3)};p.submitSearch=d;p.search_tf_j=f(k.TXT).bind("keyup",function(F){F.which==13&&d()});p.search_tf=V=="PUBLISHER"?new TextField(p.search_tf_j,
i["search-collection"]):new TextField(p.search_tf_j,i["search-library"]);var y=f(k.D).append("X").addClass("reset-search-btn").click(function(){f(document).trigger(R.REMOVE_SEARCH_KEY);p.search_tf.resetDefaultStr();y.hide()}).hide(),B=f(k.D).append(f(k.SP).append(i.loading+"...")).addClass("loading-msg").hide();p.folders_obj={};sa&&h(sa);T.bind(wa.FOLDERS_LOADED,function(F,N){sa=N;h(N)});var I="fav",x=p.folders_panel=new za(sa,j,c);if(V=="PUBLISHER"||V=="TEACHER")x.users_list.jq.prepend(p.favs_j=
f(k.A).addClass("fav").click(function(){p.authorship_panel.deselectAll();x.deselectAll();l();a.addClass(I)}).append(i.favorites,f(J(W)).addClass("bot")));f(p.folders_panel).bind(E.SELECTED,function(F,N){LibraryGlobal.shared_folder=N.data.group_id?1:0;l()});p.tool_bar_j=f(k.D).addClass("tools");p.search_j=f(k.SP).addClass("search").append(f(k.D).addClass("cap-1"),p.search_tf_j,f(k.D).addClass("cap-2").append(y));c=p.authorship_panel=new q("on");c.disp.bind(q.SELECTED,function(){b.list_box.deselectAll();
a.removeClass(I)}).bind(q.DESELECTED,function(){H.jq.show()});c.added_j.click(g);c.direct_j.click(g);_close_filter_jq=f(k.A).addClass("close-filter").hide().click(function(){f(document).trigger(ResourceEvents.SHOW_ALL);_close_filter_jq.hide()});p.content_header_j=f(k.H1);var A=f(k.A).append(i.all).click(function(F){if(!A.hasClass("disabled")){u.selectAll();da(F)}});c=f(k.A).append(i.none).click(function(){u.deselectAll()});var G=p.type_dd=new DropDown("type-dd",i["all-types"],[{label:i["all-types"],
type:0},{label:i.file,type:"f"},{label:i.link,type:"l"}],Ha);s.splice(0,0,{title:i["all-groups"],gID:"",hex:"#FFF","class":"all"});var H=p.group_dd=new DropDown("group-filter-dd",i["all-groups"],s,qa);g();f(k.D).addClass("loader");p.res_view=b;b.disp.bind(ResourcesView.RESOURCES_LOADED,function(){u.items.length>=150?A.addClass("disabled"):A.removeClass("disabled")});b.selectable=1;V!="STUDENT"&&p.authorship_panel.turnin_j.hide();u.scale_items=false;var v;s=f(J(U)).addClass("sentByMe").click(function(){if(v){L.sendEvent(q.FILTER_BY_AUTHOR,
q.EVERYTHING);v=0}else{b.filterByAuthor(q.ME_POSTS);v=1}}).html(i.onlyShowSentByMe);j=f(J(W)).addClass("row2").insertAfter(b.header_j);n||j.append(H.jq);j.append(s);p.jq.empty().append(f(k.D).addClass("tools-wrapper").append(p.tool_bar_j),B,p.res_col=f(k.D).addClass("res-wrap").append(f(k.D).addClass("col-1").append(p.authorship_panel.jq,p.folders_panel.jq),b.jq.prepend(b.header_j.append(p.type_dd.jq,f(k.D).addClass("select-menu").append(i.select+": ",A,c)))));p.init()};ta.ADD_TO_NEW_FOLDER="FilteringUI.ADD_NEW_FOLDER";
R=resources.FilterController=function(a,b){function c(){if(a=="STUDENT"){d(i.backpack);j(i.emp_backpack)}else{d(i.library);j(i.emp_added2lib)}}function g(){a!="PUBLISHER"?d(i.post_attachments,"ATTACHED"):d(i.collection)}var d,e,h=this.ui=new b(20,a);LibraryGlobal.folder_view=0;var l=h.res_view;d=h.res_view.setTitle;var j=h.res_view.setNoResourcesStr;e=h.favs_j;a!="PUBLISHER"?c():h.authorship_panel.selectType(q.EVERYTHING);T.bind(Ya.FILE_UPDATED,function(){s()});var s=this.refreshResources=function(){l.getItems()};
f(h.type_dd.select_list).bind(P.SELECTION,function(n,m){l.filterByType(m.data.type)});f(h.group_dd.select_list).bind(P.SELECTION,function(n,m){l.filterByGroup(m.data.gID)});e&&e.click(function(){l.filterByFolder(LibraryGlobal.folder_view="fav",i.favorites);j(i.no_favs);e.addClass("selected")});f(h.folders_panel).bind(E.SELECTED,function(n,m){var o=m.data;e&&e.removeClass("selected");l.filterByFolder(LibraryGlobal.folder_view=o.folder_id,o.name,o)});T.bind(q.FILTER_BY_AUTHOR,function(n,m){h.gDocsBool=
0;var o="";e&&e.removeClass("selected");h.folders_panel.deselectAll();LibraryGlobal.folder_view=0;h.group_dd.select_list.getSelectedData();c();j(i["no-resources"]);l.jq.removeClass("folder-viewed");l.jq.removeClass("favorites-viewed");switch(m){case q.EVERYTHING:o=null;g();break;case q.ME:case q.ADDED:o="ME";c();break;case q.ME_POSTS:o=q.ME_POSTS;d(i.sent_by_me);break;case q.TEACHERS:o="TEACHER";d(i.teachers);break;case q.STUDENTS:o="STUDENT";d(i.students);break;case q.DIRECT:l.getDirect();d(i.direct);
break;case q.TURNIN:l.getTurnIns();d(i["turned-in"]);break;case q.GDOC:h.gDocsBool=1;l.getGdocs();d(i.gdocs);j(i.authGdocs)}o!=""&&l.filterByAuthor(o)});f(document).bind(R.SEARCH_RESOURCES,function(n,m){l.search(m)});f(document).bind(R.REMOVE_SEARCH_KEY,function(){l.clearSearch()});if(a=="PUBLISHER"){g();l.filterByAuthor()}else{c();l.filterByAuthor("ME")}};R.SELECT_GROUP="edmodo_select_users_group";R.SEARCH_RESOURCES="edmodo_library_search_resources";R.REMOVE_SEARCH_KEY="edmodo_library_REMOVE_SEARCH_KEY";
L.sendEvent(ca);ka=RecycleBoxUI=function(){var a=this,b=new P(0,0,0,1),c=new _ResourcesView(f(k.D),b,Aa);b.allow_multiple=1;b.scale_box=0;b.empty_j.append(i["no-resources"]);b.init();ta.apply(a,[f(k.D).attr("id","RecycleBoxUI"),c]);!Ga&&a.authorship_panel.gdocs_j?a.authorship_panel.gdocs_j.remove():a.folders_panel.users_list.jq.css("height","266px");f(a.res_list).bind(P.SELECTION,function(){a.use_btn_j.removeClass("disabled")});f(a.res_list).bind(P.DESELECTION,function(){a.res_list.getSelected().length?
a.use_btn_j.removeClass("disabled"):a.use_btn_j.addClass("disabled")});a.jq.append(a.use_btn_j=f(k.BTN).addClass("select disabled").val(i.attach).click(function(){if(a.use_btn_j.hasClass("disabled"))return 0;a.disp.trigger(ka.SELECTED_RESOURCES,{selected:a.res_list.getSelected()})}));a.tool_bar_j.append(f(k.D).addClass("search").append(a.search_j.children()));a.search_j.remove();a.jq.append(a.res_col.children());a.res_col.remove()};C(ka,ta);ka.SELECTED_RESOURCES="SELECTED_RESOURCES";ca=RecycleBox=
function(a){R.apply(this,[a,ka,Q])};C(ca,R);ca=ResourcesPanel=function(a,b){var c,g=0,d,e,h=ia.getInstance();this.list=new Za;oa.apply(this,[a,[this.list.jq]]);this.jq.addClass("ResourcesPanel small");for(c in b){d=b[c];d=ga(d);d=f.extend(true,{},d);if(d.name.length>50)d.name=d.name.substr(0,50)+"...";e=new ua(d);d=h.getUI(e,d);e.init(d);this.list.addExisting(e);if(g++>=2)break}};C(ca,oa)})})(jQuery);
