var modo=modo||{};modo.elements=modo.elements||{};modo.controls=modo.controls||{};modo.resources=modo.resources||{};modo.resource_editing=modo.resource_editing||{};modo=modo||{};var DEPENDENCY_LOADED="DEPENDENCY_LOADED";function setUpInheritance(e,d){function D(){}D.prototype=d.prototype;e.super_class=d.prototype;for(var E in d)if(typeof d[E]!="object"||E=="events")e[E]=d[E];e.prototype=new D;e.prototype.constructor=e}
var getUnixDateStr=function(e,d){d=d?d:0;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+(e.getDate()+d)},JSON=JSON||{};
(function(){function e(w){return w<10?"0"+w:w}function d(w){M.lastIndex=0;return M.test(w)?'"'+w.replace(M,function(o){var k=ea[o];return typeof k==="string"?k:"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+w+'"'}function D(w,o){var k,x,A,K,q=j,B,l=o[w];if(l&&typeof l==="object"&&typeof l.toJSON==="function")l=l.toJSON(w);if(typeof O==="function")l=O.call(o,w,l);switch(typeof l){case "string":return d(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";j+=T;B=[];if(Object.prototype.toString.apply(l)==="[object Array]"){K=l.length;for(k=0;k<K;k+=1)B[k]=D(k,l)||"null";A=B.length===0?"[]":j?"[\n"+j+B.join(",\n"+j)+"\n"+q+"]":"["+B.join(",")+"]";j=q;return A}if(O&&typeof O==="object"){K=O.length;for(k=0;k<K;k+=1){x=O[k];if(typeof x==="string")if(A=D(x,l))B.push(d(x)+(j?": ":":")+A)}}else for(x in l)if(Object.hasOwnProperty.call(l,x))if(A=D(x,l))B.push(d(x)+(j?": ":":")+A);A=B.length===0?"{}":j?"{\n"+j+B.join(",\n"+j)+
"\n"+q+"}":"{"+B.join(",")+"}";j=q;return A}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var E=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
M=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,T,ea={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},O;if(typeof JSON.stringify!=="function")JSON.stringify=function(w,o,k){var x;T=j="";if(typeof k==="number")for(x=0;x<k;x+=1)T+=" ";else if(typeof k==="string")T=k;if((O=o)&&typeof o!=="function"&&(typeof o!=="object"||typeof o.length!=="number"))throw Error("JSON.stringify");return D("",
{"":w})};if(typeof JSON.parse!=="function")JSON.parse=function(w,o){function k(A,K){var q,B,l=A[K];if(l&&typeof l==="object")for(q in l)if(Object.hasOwnProperty.call(l,q)){B=k(l,q);if(B!==undefined)l[q]=B;else delete l[q]}return o.call(A,K,l)}var x;E.lastIndex=0;if(E.test(w))w=w.replace(E,function(A){return"\\u"+("0000"+A.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(w.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){x=eval("("+w+")");return typeof o==="function"?k({"":x},""):x}throw new SyntaxError("JSON.parse");}})();modo=modo||{};
(function(){modo.EL={D:"<div></div>",A:"<a></a>",P:"<p></p>",SP:"<span></span>",H1:"<h1></h1>",H2:"<h2></h2>",H3:"<h3></h3>",SEL:"<select></select>",OPT:"<option></option>",LBL:"<label></label>",IMG:"<img></img>",TXTA:"<textarea></textarea>",TXT:'<input type="text"/>',HDN:'<input type="hidden"/>',BTN:'<input type="button"/>',RB:'<input type="radio"/>',CHK:'<input type="checkbox"/>'}})();
var getElementById,CssProperties={BG_COLOR:"background-color",COLOR:"color"},countProperties=function(e){var d,D=0;for(d in e)typeof e[d]!="function"&&D++;return D},getDomain,GlobalDispatcher,GlobalDispatcher_j,AbstElement,AbstTemp,TextField,Selectable,SendButton,ConfirmBox,TEACHER="TEACHER",STUDENT="STUDENT",ADMIN="ADMIN",PUBLISHER="PUBLISHER";modo=modo||{};
modo.flash={onFoundWebCam:function(){console.log("found webcam")},onEnabledCam:function(){},onDisabledCam:function(){},getEmbed:function(e,d,D,E,M,j){j=j||"";M=M||"transparent";return'<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" WIDTH="'+d+'" HEIGHT="'+D+'" id="'+E+'"><PARAM id="movie" NAME="movie" VALUE="'+e+'"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="'+M+'"/><PARAM id="flashvars" name="flashvars" value="'+
j+'"><EMBED wmode="'+M+'" src="'+e+'" flashvars="'+j+'" quality="high" allowfullscreen="true" WIDTH="'+d+'" HEIGHT="'+D+'" NAME="'+E+'" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'}};var ListBox,Cells,EventLink,AbPanel,PointBox,SelectableItem,SelfClosingPopup,Popup,HangingMenu,Panel2;modo.controls=modo.controls||{};
var SelectList,DropDown,PageMaster,Uploader,ImageUploader,LimitedSelectList,DateField,DateRange,SearchField,Add2FoldersBox;modo=modo||{};modo.controls=modo.controls||{};modo=modo||{};modo.controls=modo.controls||{};modo=modo||{};modo.controls=modo.controls||{};
(function(e){e(function(){var d=modo,D=d.elements,E=d.controls;d=modo;var M=document,j=modo.EL,T=JSON.stringify,ea=user_name,O=user_id,w=document,o=setUpInheritance,k=AbstElement,x=GlobalDispatcher,A=e.facebox,K,q=Selectable,B=CssProperties.BG_COLOR;K=ListBox;var l=SelectList,aa=e(window),C=translated_text,P=modo.elements.createElement,ba=modo.elements.A,L=Uploader,ca=TextField,V=DateField,I=SearchField;D=d.elements;E=d.controls;var U=d.killEventBubbling;P=D.createElement;ba=D.A;var W=e.getJSON,oa=
JSON.stringify,ja=e(window);U=modo.killEventBubbling;var X=modo.elements.DIV,ka=modo.controls.selectableController,pa=e(document);d.elements={createElement:function(a){return M.createElement(a)},DIV:"div",A:"a",BUTTON:"button",INPUT:"input",H3:"h3",SPAN:"span",FORM:"form",TEXT_AREA:"textarea"};P=d.elements.createElement;X=d.elements.DIV;ba=d.elements.A;var Y={},fa;d.chat={open:function(a,b){fa=fa||e("#chats");if(!a.gcc){Y[a.group_id]=a;var c="conns="+(possible_receivers?escape(T(possible_receivers)):
"[]")+"&uid="+O+"&un="+ea+"&group="+escape(T(a))+"&sk="+b,g=e(j.D);c=a.chat_j=e(j.D).append('<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" WIDTH="300" HEIGHT="500" id="chat"><PARAM id="movie" NAME="movie" VALUE="/bin/groupim.swf"/><PARAM NAME="quality" VALUE="high"/><PARAM id="flashvars" name="flashvars" value="'+c+'"><EMBED wmode="transparent" src="/bin/groupim.swf" flashvars="'+c+'" quality="high" allowfullscreen="true" WIDTH="300" HEIGHT="500" NAME="chat" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>');
a.gcc=g.append(c);fa.append(g);c.css("bottom","0")}},close:function(a){Y[a].gcc.remove();delete Y[a].gcc;delete Y[a].chat_j},minMax:function(a,b){var c=Y[a].chat_j;if(c)b?c.css("bottom","-480px"):c.css("bottom","0")}};U=modo.killEventBubbling=function(a){a.stopPropagation()};getElementById=function(a){var b=document,c=b.getElementById(a);return c?e(c):e(b).find("#"+a)};getDomain=function(a){a=a.replace("http://www.","").replace("https://www.","").replace("http://","").replace("https://","");return a.split("/")[0]};
var la;x=GlobalDispatcher={sendEvent:function(a,b){la.trigger(a,b)}};x.DISPLAY_FOLDER="DISPLAY_FOLDER";la=GlobalDispatcher_j=e(x);k=AbstElement=function(a){if(a)this.jq=e(a);this.disp=e(this)};k.ADDED="AbstElement.ADDED";d=k.prototype;d.addChildrenTo=function(a){var b;for(b=0;b<this.jq.length;b++)a.append(this.jq[b])};d.newDiv=function(a,b){return this.newEl(j.D,a,b)};d.newA=function(a,b){return this.newEl(j.A,a,b)};d.newEl=function(a,b,c){a=e(a);b&&a.addClass(b);if(c)for(var g in c)a.append(c[g]);
return a};d.append=function(a,b){a.append(b);typeof b=="object"&&b.trigger(k.ADDED,{parent:a,child:b})};d.setData=function(a){this.jq.data("data",a)};d.getData=function(){return this.jq.data("data")};d=AbstTemp=function(a,b){var c;k.apply(this,[j.D]);c=this.jq.addClass("AbstTemp").hide();this.id_pf=a;this.htm=b;c.append(this.tmp_j=e(b));e(w).prepend(c)};o(d,k);d=d.prototype;d.buildClone=function(a){this.setStaticData(a);a=this.tmp_j.clone(true);this._clearStc();return a};d.setStaticData=function(a){this.tmp_j.attr("id",
this.id_pf+a)};d._clearStc=function(){this.tmp_j.attr("id","")};ca=modo.TextField=TextField=function(a,b,c,g){var h=this;h.jq=h.field_jq=a;h.default_str=b;h._err_css=g||"err";b&&a.val(b);Boolean(b)&&a.keyup(function(){h.changed=h.getChanged()}).focus(function(){h.changed||a.val("")}).blur(function(){h.changed=h.getChanged();h.changed||a.val(h.default_str)});c&&h.setErrorMsg(c)};d=TextField.prototype;d.getChanged=function(){var a=this.jq.val();return!this.changed&&a==this.default_str||a==""?0:1};d.setErrorMsg=
function(a){this.error_box=e(j.D).hide().addClass(this._err_css).html(a);this.error_box.insertAfter(this.field_jq)};d.setValue=function(a){this.jq.val(a);this.changed=1};d.hasChanged=function(a){if(a)if(this.changed)this.error_box&&this.error_box.hide();else this.error_box&&this.error_box.show();return this.changed};d.resetDefaultStr=function(){var a=this.field_jq;a.val(this.default_str);a.parent().hasClass("SearchField")||a.keyup();this.changed=false};d.setDefaultStr=function(a){this.default_str=
a;this.resetDefaultStr()};var N;q=Selectable=function(a,b){k.apply(this,[a]);this._selected=false;this._enabled=true;this.data=b;this.selected_css="selected";this.highlighted_css="highlighted";this.jq.addClass("Selectable");N.init.apply(this)};o(q,k);N=q.prototype;q.SELECTED="selected";q.DESELECTED="deselected";q.HIGHLIGHTED="highlighted";q.events=q.events||[];q.events.push(q.SELECTED,q.DESELECTED,q.HIGHLIGHTED);N.init=function(){var a=this;a.jq.data("data",a.data).mouseup(function(){a.toggleSelection()}).hover(function(){a.setHighlighted(1)},
function(){a.setHighlighted(0)})};N.toggleSelection=function(){this._selected?this.setSelected(0):this.setSelected(1)};N.select=function(){this._selected=true;this.data.selected=1;this.jq.addClass(this.selected_css);e(this).trigger(q.SELECTED)};N.deselect=function(){this._selected=false;this.data.selected=0;this.jq.removeClass(this.selected_css);e(this).trigger(q.DESELECTED)};N.setEnabled=function(a){(this._enabled=a)||this.deselect()};N.setSelected=function(a){if(this._enabled)a?this.select():this.deselect()};
N.getSelected=function(){return this._selected};N.setHighlighted=function(a){if(a){e(this).trigger(q.HIGHLIGHTED);this.jq.addClass(this.highlighted_css)}else this.jq.removeClass(this.highlighted_css)};d=SendButton=function(a){var b=this;b.onClick=function(){return 1};b.btn=e(j.BTN).val(a).click(function(){b.onClick()&&b.spin()});b.pin_wheel_j=b.newDiv("pin-wheel").hide();k.apply(this,[j.D]);this.jq.addClass("SendButton").append(b.btn,b.pin_wheel_j)};o(d,k);d=d.prototype;d.init=function(){this.pin_wheel_j.width(this.btn.outerWidth());
this.pin_wheel_j.height(this.btn.outerHeight())};d.spin=function(){this.btn.hide();this.pin_wheel_j.show()};d.reset=function(){this.pin_wheel_j.hide();this.btn.show()};var Z=ConfirmBox=function(a,b,c){var g=this;k.apply(g,[j.D]);g.onOk=function(){g.disp.trigger(Z.CONFIRMED,c.data);A.close()};g.onCancel=function(){g.disp.trigger(Z.CANCELLED,c.data);A.close()};c=c||{};g.onOk=c.onOk||g.onOk;var h=c.ok_str||b.yes;b=c.cancel_str||b.no;g.message_j=g.newDiv("msg",[a]);g.ok_j=g.newEl(j.BTN,0).val(h).addClass("small").click(g.onOk);
g.cancel_j=g.newEl(j.BTN,0).val(b).addClass("small").click(g.onCancel);g.jq.addClass("ConfirmBox").append(g.message_j,g.ok_j,g.cancel_j)};o(Z,k);Z.CONFIRMED="CONF";Z.CANCELLED="CANCEL";K=ListBox=function(a,b,c,g){k.apply(this,[j.D]);this.items=[];this.empty_j=e(j.D).addClass("emtpy").hide();this.list_j=e(j.D).addClass("list");this.spinner_j=e(j.IMG).addClass("listbox-pin-wheel").attr("src","http://images.edmodo.com/images/loading.gif").hide();this.jq.addClass("containers_01 ListBox").append(this.empty_j,
this.list_j,this.spinner_j);this.setEmptyMsg(g);a&&this.load(a,b,c)};o(ListBox,k);d=ListBox.prototype;d.setEmptyMsg=function(a){this.empty_msg=a;this.empty_j.empty().append(a)};d.load=function(a,b,c){this.removeAll();this.addItems(a,b,c)};d.addItems=function(a,b,c){for(var g in a)this.addItem(a[g],b,c);this.checkLength()};d.addExistingItems=function(a){for(var b in a)this.addExisting(a[b]);this.checkLength()};d.addItem=function(a,b,c){a=new b(a,c);this.addExisting(a);this.checkLength();return a};
d.addExisting=function(a){var b=this,c,g,h;a.list_index=b.items.length;c=a.constructor;if(c.events){c=c.events;for(h in c){g=c[h];a.disp.bind(g,function(f,m){var p=f.handleObj.namespace,y=f.type;if(Boolean(p))y+="."+p;b.disp.trigger(y,m)})}}b.items.push(a);b.list_j.append(a.jq);b.checkLength();return a};d.removeItemAt=function(a){this.items.splice(a,1)[0].jq.remove();for(a=a;a<this.items.length;a++)this.items[a].list_index--;this.checkLength()};d.removeAll=function(){var a,b=this.list_j.children().get();
for(a in b)this.list_j[0].removeChild(b[a]);this.items=[];this.checkLength()};d.checkLength=function(){this.items.length?this.empty_j.hide():this.empty_j.show();return this.items.length};Cells=function(a,b){var c=e(j.D).css("clear","both");k.apply(this,[j.D]);this._sub_container=e(j.D).addClass("Cells-content");this.jq.addClass("Cells").append(this._sub_container);b||this.jq.append(c);this.selected=false;a&&this.jq.addClass(a)};o(Cells,k);d=Cells.prototype;d.setContents=function(a){this.cell_jqs=
[];this._sub_container.empty();for(i in a){this.cell_jqs[i]=e(j.D).addClass("cell n"+i).append(a[i]);this._sub_container.append(this.cell_jqs[i])}};d.destruct=function(){this.selected=0;_foot.remove();this.jq.remove()};d.setData=function(a){this.jq.data("data",a)};d.getData=function(){return this.jq.data("data")};EventLink=function(a){k.apply(this,[j.A]);this.jq.append(a.label);a.click_event_type&&this.jq.click(function(){x.sendEvent(a.click_event_type)});a.css_classes&&this.jq.addClass(a.css_classes)};
o(EventLink,k);d=AbPanel=function(a,b,c,g,h){var f=this;k.apply(f,[j.D]);f._item_limit=c||10;f._show_all=g||false;f._is_open=h||true;f.closed_class="closed";f.header_lbl_j=e(j.H3).append(a);f.header_j=e(j.D).addClass("header").append(f.header_lbl_j).click(function(){f.togglePanel()});f.panel_j=e(j.D).addClass("panel");f.content_j=e(j.D).addClass("content");f.more_link_j=e(j.A).append(b.more).addClass("more").click(function(){f.showMore()});f.less_link_j=e(j.A).append(b.less).addClass("less").click(function(){f.showLess()}).hide();
f.jq.addClass("containers_01 AbPanel").append(f.header_j,f.panel_j.append(f.content_j,f.more_link_j,f.less_link_j));f._is_open?f.open():f.close();f._show_all?f.showMore():f.showLess()};o(d,k);d=AbPanel.prototype;d.togglePanel=function(){this._is_open?this.close(true):this.open(true)};d.open=function(){this.header_j.removeClass(this.closed_class);this.panel_j.show();this._is_open=true};d.close=function(){this.header_j.addClass(this.closed_class);this.panel_j.hide();this._is_open=false};d.showMore=
function(){this.content_j.children().show();this._show_all=true;this.more_link_j.hide();this.less_link_j.show()};d.showLess=function(){this.content_j.children().slice(this._item_limit).hide();this._show_all=false;this.less_link_j.hide();this.more_link_j.show()};d.setContent=function(a){this.content_j.empty();this.appendContent(a)};d.appendContent=function(a){for(var b in a)this.content_j.append(a[b]);this._onContentChanged(this)};d.removeItem=function(a){a.remove();this._onContentChanged(this)};d._onContentChanged=
function(a){a._show_all?a.showMore():a.showLess();if(a.content_j.children().length<=a._item_limit){a.less_link_j.hide();a.more_link_j.hide()}};d=PointBox=function(a,b){var c;k.apply(this,[j.D]);this.pointer_offset=0;this.container_j=e(j.D).addClass("container").css({position:"absolute"}).append(b);this.box_j=e(j.D).addClass("box").css({position:"absolute"}).append(this.rel_box=e(j.D).css({position:"relative",left:0,top:0}).append(this.container_j,this.top_j=e(j.D).addClass("top"),this.bottom_j=e(j.D).addClass("bottom"),
this.left_j=e(j.D).addClass("left"),this.right_j=e(j.D).addClass("right"),e(j.D).addClass("tl"),e(j.D).addClass("tr"),e(j.D).addClass("bl"),e(j.D).addClass("br")));c=this.pointer_j=e(j.D).addClass("pointer");this.wj=e(window);this.point_at_j=a;this.jq.addClass("PointBox").css({position:"absolute","z-index":100}).append(this.box_j,c);c={position:"relative",left:0,top:0};a.css(c).prepend(this.newDiv("PointBox-container",[this.jq]).css(c))};o(d,k);d.prototype.updatePosition=function(){var a=this.wj.width(),
b=this.wj.height(),c=this.wj.scrollLeft(),g=this.wj.scrollTop(),h=this.left_j.width()+this.container_j.width()+this.right_j.width(),f=this.top_j.height()+this.container_j.height()+this.bottom_j.height();this.box_j.width(h).height(f);this.rel_box.width(h).height(f);this.jq.width(0).height(0).width(this.pointer_j.width()+h).height(f).css({left:this.point_at_j.width()+"px",top:0});this.pointer_j.css({left:0,top:this.pointer_j.height()+"px"}).removeClass("pe");this.box_j.css("left",this.pointer_j.width()+
"px");this.top_j.width(this.container_j.width());this.bottom_j.width(this.container_j.width());this.left_j.height(this.container_j.height());this.right_j.height(this.container_j.height());h=this.jq.width();f=this.jq.height();c=this.jq.offset().left-c+h;g=this.jq.offset().top-g+f;if(c+10>=a){this.jq.css("left","-"+h+"px");this.box_j.css("left",0);this.pointer_j.css("left",this.box_j.width()+"px").addClass("pe")}if(g+10>=b){a=g-b;try{this.jq.css("top","-"+a+"px")}catch(m){}this.pointer_j.css("top",
a+this.pointer_offset+"px")}};SelectableItem=function(a){q.apply(this,[j.D,a]);this.jq.addClass("containers_01 SelectableItem").append(a.label);a.css&&this.jq.addClass(a.css)};o(SelectableItem,q);d=SelfClosingPopup=function(a,b){function c(){A.close()}function g(){clearInterval(m);e(document).unbind(f,g)}var h=this,f="close.facebox",m;k.apply(h,[a]);h.jq.addClass("SelfClosingPopup");h.close_delay=b||5E3;h.setCloseTimer=function(){m=setInterval(c,h.close_delay)};e(document).bind(f,g)};o(d,k);d=Popup=
function(a,b){function c(){A.close()}function g(){clearInterval(m);e(document).unbind(f,g)}var h=this,f="close.facebox",m;k.apply(h,[a]);h.jq.addClass("Popup");h.close_delay=b||5E3;h.setCloseTimer=function(){m=setInterval(c,h.close_delay)};e(document).bind(f,g)};o(d,k);d=HangingMenu=function(a,b){var c=this;k.apply(this,[j.D]);this.icon_hex=b;this.jq.addClass("HangingMenu").append(c.open_btn_j=c.newDiv("open-btn",[this.icon_a_j=c.newDiv().click(function(){c.onClickOpen(c,a)})])).css({position:"relative"});
b&&c.icon_a_j.css(B,b)};o(d,k);d=d.prototype;d.setHex=function(a){this.icon_hex=a;this.icon_a_j.css(B,a);this.icon_b_j&&this.icon_b_j.css(B,a)};d.hide=function(){this.menu_j.hide();this.jq.css("z-index",0)};d.disable=function(){this.icon_a_j.unbind()};d.onClickOpen=function(a,b){if(!a.menu_j){a.menu_j=a.newDiv("menu",[a.newDiv("btn",[a.icon_b_j=a.newDiv()]),a.newDiv("menu-content",b).click(function(){a.hide()})]).css({position:"absolute",left:0,top:0});e(document).click(function(c){a.onDocClick(c,
a)});a.jq.prepend(a.menu_j)}a.icon_hex&&a.icon_b_j.css(B,a.icon_hex);a.jq.css("z-index",10);a.menu_j.show()};d.onDocClick=function(a,b){a.target!=b.open_btn_j.children()[0]&&b.hide()};d=Panel2=function(a,b,c){var g=this;k.apply(g,[j.D]);g._is_open=c||1;g.closed_class="closed";g.header_lbl_j=e(j.H3).append(a);g.header_j=e(j.D).addClass("header").click(function(){g.togglePanel()}).append(g.header_lbl_j);g.panel_j=e(j.D).addClass("panel");for(var h in b)g.panel_j.append(b[h]);g.jq.addClass("containers_01 Panel2").append(g.header_j,
g.panel_j);g._is_open?g.open():g.close()};o(d,k);d=Panel2.prototype;d.togglePanel=function(){this._is_open?this.close(true):this.open(true)};d.open=function(){this.header_j.removeClass(this.closed_class);this.panel_j.show();this._is_open=true};d.close=function(){this.header_j.addClass(this.closed_class);this.panel_j.hide();this._is_open=false};l=SelectList=function(a,b,c,g){var h=this;K.apply(h,[a,b,c]);h.jq.addClass("controls SelectList").keydown(function(f){h.onKeyDown(f)}).focus(function(){h.setHighlighted(h.hl_index)});
h.selection_index=h.hl_index=0;h.scale_items=1;h.allow_multiple=0;h.scale_box=!g;h.setMaxVertical(5)};o(l,K);d=l.prototype;l.SELECTION="selection";l.DESELECTION="deselection";l.HIGHLIGHTED="HIGHLIGHTED";d.init=function(){if(this.items.length){this._item_height=this.items[0].jq.outerHeight();this.setMaxVertical(this.getMaxVertical());if(this.scale_items)for(i in this.items)this.items[i].jq.width(this.jq.width())}};d.addItem=function(a,b,c,g){return l.super_class.addItem.apply(this,[a,b,c,g])};d.addExisting=
function(a){var b=this;a=l.super_class.addExisting.apply(b,[a]);a.data&&a.data.selected&&a.select();b.scale_items&&a.jq.width(b.jq.width());e(a).bind(q.SELECTED,function(c){b.onSelection(c)}).bind(q.DESELECTED,function(c){b.onDeselection(c)}).bind(q.HIGHLIGHTED,function(c){b.onHighlighted(c)});b.setMaxVertical(b.getMaxVertical());return a};d.removeSelected=function(){for(var a=0;a<this.items.length;a++)if(this.items[a].getSelected()){this.removeItemAt(a);a--}};d.selectItem=function(a){this.items[a].select()};
d.selectAll=function(){e(this.items).each(function(){this.select()})};d.deselectAll=function(){e(this.items).each(function(){this.deselect()})};d.unhighlightAll=function(){e(this.items).each(function(){this.setHighlighted&&this.setHighlighted(0)})};d.setMaxVertical=function(a){this.jq.width();if(this.scale_box)if(this.items.length>a)this._item_height&&this.jq.height(this._item_height*a+"px");else this.jq.height("auto");this._max_vertical=a};d.getMaxVertical=function(){return this._max_vertical};d.setSelectable=
function(a){for(var b in this.items)this.items[b].setEnabled(a)};d.setHighlighted=function(a,b){if(this.items.length){this.unhighlightAll();this.items[a].setHighlighted&&this.items[a].setHighlighted(1);b&&this.jq.scrollTop(this._item_height*(a-1))}};d.getSelected=function(){var a=[],b;for(b in this.items)this.items[b].getSelected()&&a.push(this.items[b]);return a};d.getSelectedData=function(){var a=[],b;for(b in this.items)this.items[b].getSelected()&&a.push(this.items[b].data);return a};d.onSelection=
function(a){this.allow_multiple||e(this.items).each(function(){this!=a.target&&this.deselect()});e(this).trigger(l.SELECTION,a.target)};d.onDeselection=function(a){e(this).trigger(l.DESELECTION,a.target)};d.onHighlighted=function(a){e(this).trigger(l.HIGHLIGHTED,a.target);this.hl_index=a.target.list_index;e(this.items).each(function(){this!=a.target&&this.setHighlighted(0)})};d.onKeyDown=function(a){switch(a.which){case 40:case 39:this.hl_index<this.items.length-1&&this.hl_index++;this.setHighlighted(this.hl_index,
1);return false;case 38:case 37:this.hl_index>0&&this.hl_index--;this.setHighlighted(this.hl_index,1);return false;case 33:case 36:return false;case 34:case 35:return false;case 32:if(this.disableSpaceSelect)break;case 13:this.items[this.hl_index].select();return false}};d=DropDown=function(a,b,c,g,h){var f=this,m;k.apply(f,[j.D]);f.class_type="DropDown";f.disabled_css="disabled";f.open_css="open";f.change_header=1;f.header_j=e(j.D).addClass(f.class_type+"-h").attr("tabindex","0").click(function(){f.onClick(f)});
var p=e(j.D).addClass("arrow").click(function(){f.onClick(f)});(f.init_header=b)&&f.setHeader(b);f.select_list=new l(c,g,h);f.select_list.jq.hide().css({left:0,position:"absolute"});f.jq.addClass("controls "+f.class_type).addClass(a).css("position","relative").append(f.header_j,p).append(f.select_list.jq);f.setEnabled(1);aa.resize(function(){f.positionList()});aa.scroll(function(){f.positionList()});f.jq.click(function(){m=1});e(document).click(function(){m||f.hideList(f);m=0});e(f.select_list).bind(l.SELECTION,
function(y,t){f.onSelection(y,t,f)})};o(d,k);d=d.prototype;d.init=function(){var a,b;items=this.select_list.items;!this.init_header&&items.length&&this.setHeader(items[0].jq.clone());for(a in items){b=items[a];b.data&&b.data.selected&&this.setHeader(items[a].jq.clone())}this.header_height=this.header_j.height();a=this.select_list.jq.outerWidth()-this.select_list.jq.innerWidth();this.select_list.jq.width(this.jq.width()-a-1)};d.reset=function(a){a=this;a.select_list.deselectAll();a.setHeader(a.init_header)};
d.setEnabled=function(a,b){b=this;(b.enabled=a)?b.jq.removeClass(b.disabled_css):b.jq.addClass(b.disabled_css)};d.setHeader=function(a){var b=this;a=typeof a=="string"?e(j.D).append(a):a;a.click(function(){b.header_j[0].focus()});b.header_j.empty().append(a)};d.showList=function(){this.select_list.jq.css("overflow","").show();this.select_list.init();this.positionList();this.jq.addClass(this.open_css)};d.hideList=function(a){a=this;a.select_list.jq.hide();if(a.jq.is(":visible")){a.jq.hide();a.jq.show().css("display",
"")}a.select_list.jq.css("overflow","visible");a.jq.removeClass(a.open_css)};d.positionList=function(){var a=this.select_list.jq.height(),b=aa.height(),c=aa.scrollTop();if(this.jq.offset().top-c+a>=b)this.select_list.jq.css({top:"-"+a+"px"});else this.header_height&&this.select_list.jq.css({top:this.header_height+"px","background-position":"0 -"+this.header_height+"px"})};d.onClick=function(a){if(a.enabled)if(a.select_list.jq.is(":visible"))a.hideList(a);else{a.showList();a.select_list.jq[0].focus()}};
d.onSelection=function(a,b,c){c.hideList(c);c.change_header&&c.setHeader(b.jq.clone())};var F=PageMaster=function(a,b){var c,g={};g.orientation=F.HORIZONTAL;b=b||{};for(c in g)b[c]=b[c]||g[c];this.container_j=a;this.options=b;this.init()};F.HORIZONTAL="horizontal";F.VERTICAL="vertical";F.ADDED_PAGE="EDMODO_pagemaster_add";F.REMOVED_PAGE="EDMODO_pagemaster_remove";F.CHANGED_PAGE="EDMODO_pagemaster_change";F.ANIME_COMPLETE="EDMODO_pagemaster_end_anime";d=F.prototype;d.init=function(){this.container_j.css({overflow:"hidden",
position:"relative"});this.width=parseInt(this.container_j.css("width"));this.height=parseInt(this.container_j.css("height"));this.pages_j=this.container_j.children();this.slider_j=e('<div class="slider"></div>').css({position:"absolute",left:0});this.pages_j.wrapAll(this.slider_j);this.slider_j=this.container_j.children(".slider");this.current_page=0;this.setupPages()};d.setupPages=function(){var a=this,b=0,c;a.page_count=a.pages_j.length;a.pages_j.each(function(){c=e(this).width(a.width).height(a.height);
switch(a.options.orientation){case F.HORIZONTAL:c.css({position:"absolute",left:b*a.width+"px"})}b++})};d.pageTo=function(a){var b=this;if(!b._inRange(a))throw"PageMaster.pageTo() : Page number is out of range.";b.current_page=a;switch(b.options.orientation){case F.HORIZONTAL:b.slider_j.animate({left:-(a*b.width)+"px"},{duration:1100,complete:function(){b._onAnimeComplete()}})}e(b).trigger(F.CHANGED_PAGE,{page_num:a,page:b.pages_j[a]})};d.pageInc=function(){this.pageTo(this.current_page+1)};d.pageDec=
function(){this.pageTo(this.current_page-1)};d.getPageTitle=function(a){return e(this.pages_j[a]).attr("title")};d.addPage=function(a){if(a<0||a>this.page_count)throw"fusion.ui.PageMaster.addPage() : Page number is out of range.";var b=this.pages_j[a],c=this.pages_j[a-1];if(a<=0){a=e(b).clone(true);a.empty().insertBefore(b)}else{a=e(c).clone(true);a.empty().insertAfter(c)}this.pages_j=this.slider_j.children();this.setupPages();e(this).trigger(F.ADDED_PAGE);return a};d.removePage=function(a){if(!_inRange(a))throw"PageMaster.removePage() : Page number is out of range.";
e(this.pages_j[a]).remove();this.pages_j=this.slider_j.children();this.setupPages();e(this).trigger(F.REMOVED_PAGE)};d._inRange=function(a){return!(a<0||a>this.page_count-1)};d._onAnimeComplete=function(){e(this).trigger(F.ANIME_COMPLETE,{page_num:this.current_page,page:this.pages_j[this.current_page]})};L=Uploader=function(a,b,c,g){this.hover_css=L.HOVER;this._max=g?g:-1;this._accepted=c?c:"";_btn_element_j=this.btn_element_j=b||this.newA("upload",[C.upload]);this.form_j=e('<form onsubmit="return false;" target="upload_iframe" action="'+
a+'" enctype="multipart/form-data" method="post"></form>');this.data_hdn_j=e('<input name="data" type="hidden"></input>').hide();this.static_j=this.newDiv();this.reset();this.static_j.append(_btn_element_j,this.data_hdn_j);this.dynamic_j=this.newDiv(0).hide();this.iframe_j=e('<iframe name="upload_iframe"></iframe>').hide();k.apply(this,[j.D]);this.jq.addClass("controls Uploader").append(this.form_j.append(this.static_j,this.dynamic_j),this.iframe_j)};o(L,k);d=L.prototype;d.reset=function(){var a=
this;if(a.file_input_j){a.list_j.remove();a.static_j.find(".MultiFile-applied").remove()}a.file_input_j=e('<input type="file" name="file[]"></input>').mouseenter(function(){a.btn_element_j.addClass(a.hover_css)}).mouseout(function(){a.btn_element_j.removeClass(a.hover_css)});a.file_input_j.MultiFile({list:a.list_j=e(j.D).addClass("Uploader-list"),STRING:L.STRINGS,max:a._max,accept:a._accepted,afterFileSelect:function(){a.disp.trigger(L.FILE_SELECTED)},error:a.onError});a.static_j.append(a.file_input_j);
a.data_hdn_j.val("")};d.onError=function(a){A(a)};L.STRINGS={remove:"x",file:"$file",denied:C["wrong-extension"],selected:C["file-selected"],duplicate:C["file-duplicated"]};L.FILE_SELECTED="FILE_SELECTED";L.HOVER="hover";var da=ImageUploader=function(a,b,c){var g=this,h,f,m=e(j.D).addClass("thumb pin-wheel");k.apply(g,[j.D]);g.reset_j=c=c||e(P(ba)).addClass("reset").html(C.reset);f=g.uploader=new L(a,b,"jpg|jpeg|gif|png",1);f.disp.bind(L.FILE_SELECTED,function(){f.form_j.submit();f.jq.hide();m.show();
g.disp.trigger(da.UPLOADING)});a=g.reset=function(){h=0;f.reset();f.jq.show();m.css("background","").hide();c.hide()};c.click(a);g.setThumb=function(p){h=p;m.css("background","url("+p+") center center no-repeat").show();c.show();f.jq.hide()};g.getUrl=function(){return h};g.reset();g.jq.addClass("controls ImageUploader").append(f.jq,m,c)};o(da,k);da.IMAGE_UPLOADED="image_uploaded";da.UPLOADING="uploading";var $=LimitedSelectList=function(a,b,c,g,h){var f=this;l.apply(f,[0,0,0,1]);f._item_limit=g||
10;f._show_all=h||0;f.more_link_j=e(j.A).append(C["show-all"]).addClass("more").click(function(){f.showAll()});f.less_link_j=e(j.A).append(C.less).addClass("less").click(function(){f.showLimited()}).hide();f.load(a,b,c);f.jq.addClass("controls LimitedSelectList").append(f.more_link_j,f.less_link_j)};o($,l);d=$.prototype;d.setShowAll=function(a){this._show_all=a;this._onContentChanged(this)};d.setLimit=function(a){this._item_limit=a;this._onContentChanged(this)};d.addExisting=function(a){a=$.super_class.addExisting.apply(this,
[a]);this._onContentChanged(this);return a};d.removeItemAt=function(a){$.super_class.removeItemAt.apply(this,[a]);this._onContentChanged(this)};d.removeAll=function(){$.super_class.removeAll.apply(this);this._onContentChanged(this)};d.showAll=function(){var a;this._show_all=true;for(a in this.items)this.items[a].jq.show();this.more_link_j.hide();this.less_link_j.show()};d.showLimited=function(){var a,b;this._show_all=false;for(a in this.items){b=this.items[a];parseInt(a)+1<=this._item_limit?b.jq.show():
b.jq.hide()}this.less_link_j.hide();this.more_link_j.show()};d._onContentChanged=function(a){if(a.items.length<=a._item_limit){a.less_link_j.hide();a.more_link_j.hide()}else a._show_all?a.showAll():a.showLimited()};var ga=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/;V=DateField=function(a,b){var c=this;c.date=0;c.picker_open=0;c.field=typeof a=="string"&&a.match(ga)?new ca(e(j.TXT)):new ca(e(j.TXT),c.val);c.field.changed=c.changed;c.field.jq.datePicker({clickInput:true,verticalOffset:29,renderCallback:function(g,
h){g.click(function(){c.date=h;c.field.changed=1;c.field.jq.val(c.formatDate(h)).dpClose()})}}).bind("dpClosed",function(){c.picker_open=0}).bind("dpDisplayed",function(){c.picker_open=1}).keyup(function(){c._onKeyUp()}).focus(function(){c.field.jq.dpDisplay()});c.field.error_box=c.newDiv("err",[b]).hide();c.btn_j=c.newA().click(function(){c.field.jq.dpDisplay()});c.date_err_j=c.newDiv("err",[C["date-format-err"]]).hide();k.apply(c,[j.D]);c.jq.addClass("controls DateField").append(c.field.jq,c.btn_j,
c.field.error_box,c.date_err_j);if(a)switch(typeof a){case "string":c.val=a;break;case "object":c.setDate(a)}else c.setDate(new Date)};o(V,k);d=V.prototype;d._onKeyUp=function(){var a;a=this.field.jq.val();if(a.match(ga)){a=a.split("/");this.date=new Date(a[2],a[0]-1,a[1])}else this.date=0};d.setDate=function(a){this.date=a;this.field.setValue(this.val=this.formatDate(a));this.changed=1};d.getDate=function(){return this.date};d.getDateStr=function(){var a=1;if(this.field.getChanged()){_date_str=this.field.jq.val();
if(!_date_str.match(ga)){a=0;this.date_err_j.show()}}else a=0;if(!a)return 0;return _date_str};d.getUnixDateStr=function(){var a;a=this.getDateStr();if(!a)return 0;a=a.split("/");return a[2]+"-"+a[0]+"-"+a[1]};d.formatDate=function(a){return 1+a.getMonth()+"/"+a.getDate()+"/"+a.getFullYear()};V.DATE_SET="DATE_SET.DateField";d=DateRange=function(a,b){var c=this;c.start_df=new V(a,C["no-date-err"]);c.end_df=new V(b,C["no-end-date-err"]);c.start_df.field.jq.bind("dpClosed",function(h,f){var m=f[0];if(m){m=
new Date(m);c.end_df.field.jq.dpSetStartDate(m.addDays(1).asString())}});c.start_df.field.jq.bind("dateSelected",function(h,f){c.rangeReversed(f,c.end_df.date)&&c.end_df.setDate(f)});c.end_df.field.jq.bind("dpClosed",function(h,f){var m=f[0];if(m){m=new Date(m);c.start_df.field.jq.dpSetEndDate(m.addDays(-1).asString())}});var g=c.newA(0,[C["single-date"]]).click(function(){c.showRange(0)});c.range_btn_j=c.newA(0,[C["date-range"]]).click(function(){c.showRange(1)});k.apply(c,[j.D]);c.jq.addClass("controls DateRange").append(c.start_df.jq,
c.range_btn_j,c.range_j=c.newDiv("range-box",[e(j.SP).append(C.to),c.end_df.jq,g]).hide(),c.range_err_j=c.newDiv("err",[C["date-range-err"]]).hide());b&&c.showRange(1)};o(d,k);d=d.prototype;d.showRange=function(a){var b,c;if(a){b=this.start_df.date;c=this.end_df.date;this.rangeReversed(b,c)&&this.end_df.setDate(b);this.range_j.show();this.range_btn_j.hide()}else{this.range_j.hide();this.range_btn_j.show()}this.range=a};d.rangeReversed=function(a,b){return Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())>
Date.UTC(b.getFullYear(),b.getMonth(),b.getDate())};d.getDates=function(){var a=[],b=this.start_df.date,c=this.end_df.date,g=this.start_df.getUnixDateStr();if(!g)return 0;if(b)a[0]=g;this.range_err_j.hide();if(this.range){if(!c||this.rangeReversed(b,c)){this.range_err_j.show();return 0}a[1]=this.end_df.getUnixDateStr()}else a[1]=0;return a};I=SearchField=function(a){var b=this;a=a||C.search;b.field=new ca(e(j.TXT),a);b.field.jq.keyup(function(c){b._onKeyUp(c)});b.btn_j=b.newA("icon").click(function(){b.submit()});
b.clear_j=b.newA("clear-field",["X"]).hide().click(function(){b.clear()});k.apply(b,[j.D]);b.jq.addClass("controls SearchField").append(b.btn_j,b.field.jq,b.clear_j)};o(I,k);d=I.prototype;d.submit=function(){var a=this.field.jq.val();this.disp.trigger(I.SUBMITTED,a);return a};d.clear=function(){var a=this.field;a.jq.val("");this.disp.trigger(I.CLEARED,a.jq.val());a.resetDefaultStr();this.clear_j.hide()};d._onKeyUp=function(a){if(a.which==13)this.submit();else if(this.field.getChanged()){this.disp.trigger(I.CHANGED,
this.field.jq.val());this.clear_j.show()}else{this.disp.trigger(I.CLEARED);this.clear_j.hide()}};I.CHANGED="CHANGED.SearchField";I.SUBMITTED="SUBMITTED.SearchField";I.CLEARED="CLEARED.SearchField";E=Add2FolderBox=E.Add2FoldersBox=modo.controls.Add2FoldersBox=function(){var a=function(){if(G){var n=b();W(p+"add-gdocs-to-folders",{gdocs:oa(t),folder_ids:n.addIds})}else{n=b();W(p+"update-folders-items",{item_ids:t,add_ids:n.addIds,remove_ids:n.removeIds})}h.removeAll();h.disp.trigger(Add2FolderBox.ADDED)},
b=function(){var n,r,s=[],v=[];for(n in m){r=m[n];if(r.changed){r.selected?s.push(r.id):v.push(r.id);delete r.changed}}return{addIds:s,removeIds:v}},c=function(){var n,r=h.items;for(n in r)r[n].jq.show()},g=function(n){var r,s;for(r in m){s=m[r];s.items_state=n[s.id]}h.superLoad(m,y,{tick:1,deselectable:1});h.items.length&&h.items[0].jq.addClass("highlighted");f.show();H.field.jq[0].focus();if(!J)J=f.position().top;f.css({top:J+"px"});n=ja.height();r=ja.scrollTop();s=f.height();f.offset().top-r+s>=
n&&f.css({top:"-"+(s+h.top_os)+"px"})},h=this,f,m,p="/library/ajax-",y,t,J,G,H=new I,Q=e(P(ba)).click(a).text(C.apply);h.search_box=H;h.top_os=4;H.disp.bind(I.CHANGED,function(n,r){var s,v=h.items,u;for(s in v){u=v[s];r!=""&&u.data.name.toLowerCase().indexOf(r.toLowerCase())!=-1?u.jq.show():u.jq.hide()}}).bind(I.CLEARED,c);H.clear_j.click(c);l.apply(h,[]);f=h.jq.keydown(function(n){switch(n.which){case 13:a()}});h.disableSpaceSelect=1;h.superLoad=h.load;h.load=function(n,r,s){h.hl_index=0;m=n;y=s;
t=r;G?W(p+"get-folders",0,g):W(p+"get-folders-for-items",{item_ids:t},g);h.removeAll()};h.setGdocsBool=function(n){G=n};h.setItemIds=function(n){t=n};h.jq.addClass("controls Add2FoldersBox").click(function(n){U(n)}).prepend(H.jq).append(Q)};o(E,l);Add2FolderBox.ADDED="ADDED";ka=modo.controls.selectableController=function(a){var b,c,g,h,f,m,p=0,y,t={disabledCSS:"dis",hoverCSS:"hov",selectedCSS:"sel",allowMulti:1,onSelected:0,onDeselected:0,onHover:0,keyCatcher:0},J=function(){var n=t.keyCatcher;a=
e(a);b=t.selectedCSS;c=t.hoverCSS;g=t.disabledCSS;h=t.onSelected;f=t.onDeselected;m=t.onHover;var r="a:not(."+g+")",s;a.delegate(r,"click",function(v){s=e(this);if(s.hasClass(b)){var u=e(s).removeClass(b);f&&f(u,v)}else Q(s,v)}).delegate(r,"mouseover",function(){H(e(this))}).delegate(r,"mouseout",function(){e(this).removeClass(c)});n&&n.keydown(G);J=null},G=function(n){y=y||a.children();switch(n.which){case 38:p--;H(y[p]);break;case 40:p++;H(y[p]);break;case 13:Q(y[p])}U(n)},H=function(n){a.children().removeClass(c);
n=e(n).addClass(c);m&&m(n)},Q=function(n,r){t.allowMulti||a.children().each(function(){e(this).removeClass(b)});var s=e(n).addClass(b);h&&h(s,r)};return{conf:t,init:J,hoverItem:H,selectItem:Q}};modo.controls.searchBox=function(a){function b(){r||t.hide();r=0}function c(v){a=e(v).click(U).keyup(function(u){switch(u.which){case 40:case 39:p++;if(p>G.length-1)p=0;y.hoverItem(G[p]);break;case 38:case 37:p--;if(p<0)p=G.length-1;y.hoverItem(G[p]);break;case 13:y.selectItem(G[p],u);break;default:g(a.val())}}).bind("focus",
function(u){var z=a.val();z!=""&&z!=n&&g(z);U(u);J.empty();h()});v=a.val();n=v==""?0:v}function g(v){Q=v.toLowerCase();v.length>=2&&W("/search/ajax-auto-complete",{search_str:Q},function(u){var z,R,ha,ma,S,ia,na="";m=p=0;H&&H.remove();for(R in u){z=u[R];if(z.type=="user"||z.type=="community"){ha=z.id;S=z.username;ia=z.type=="community"?"COMMUNITY":z.user_type;ma=z.name;S=z.type=="community"?' href="/community/'+S+'"':0;switch(ia){case "TEACHER":S=' href="/profile/'+ha+'"';break;case "STUDENT":S=' href="/user?uid='+
ha+'"';break;case "PUBLISHER":S=' href="/publisher/'+z.username+'"'}if(S){na+="<a"+S+'><img src="'+z.thumb+'"><span class="name">'+ma+"</span><span>"+C[ia]+"</span></a>";if(m>=8)break;m++}}}J[0].innerHTML=na;h();f();t.show()});if(view.feed_handler.message_feed)view.feed_handler.message_feed.searchClicked=true}function h(){var v=s.defaults;if(v&&v.length){for(i=v.length-1;i>=0;i--){var u,z,R;u=e(v[i]);z=u.data("events").click;for(R in z)u.bind("select",z[R].handler);u.unbind("click");J.prepend(u.clone(true).addClass("def"))}f();
t.show()}}function f(){p=0;G=J.children();if(G.length)y.hoverItem(G[p]);else H=e(P(X)).addClass("no-results").appendTo(t).html(C.no_search_results)}var m,p,y,t=e(P(X)).addClass("controls searchBox"),J=e(P(X)).addClass("ls"),G,H,Q,n,r,s={defaults:[]};return{jq:t,conf:s,init:function(){r=1;s.defaults=modo.search_defaults||s.defaults;t.append(J);y=ka(J);var v=y.conf;v.onSelected=function(u,z){U(z);t.hide();var R=u.attr("href");if(R)document.location=R;else u.trigger("select")};v.onHover=function(u){p=
u.index()};y.init();c(a);h();pa.unbind("click",b).click(b)}}};modo.controls.charCounter=function(a,b){function c(){var h=a.val(),f=h.length;f>b&&a.val(h.substr(0,b));g.text(f+"/"+b)}var g=e(P(X)).addClass("controls charCounter");a.keyup(c);c();return{jq:g}}})})(jQuery);
